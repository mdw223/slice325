<div class="pdf-button-shortcode">
  <button class="pdf-generate" 
    data-name="{{ .Get "name" | default "John Doe" }}" 
    data-course="{{ .Get "course" | default "Course Name" }}" 
    data-score="{{ .Get "score" | default "100" }}"
    style="padding: 10px 18px; background-color:#007bff; color:#fff; border:none; border-radius:4px; cursor:pointer; font-size:14px;">
    {{ .Get "label" | default "Download Certificate" }}
  </button>
</div>

<script>
(function () {
  // Attach click handler to buttons created by this shortcode.
  // Use a short timeout so this script is safely evaluated after DOM insertion.
  setTimeout(function () {
    var buttons = document.querySelectorAll('.pdf-button-shortcode .pdf-generate');
    buttons.forEach(function (btn) {
      // Avoid attaching multiple handlers
      if (btn.dataset.pdfHandlerAttached) return;
      btn.addEventListener('click', function (e) {
        var name = btn.getAttribute('data-name') || 'John Doe';
        var course = btn.getAttribute('data-course') || 'Course Name';
        var score = btn.getAttribute('data-score') || '100';
        if (typeof window.createCertificate === 'function') {
          window.createCertificate(name, course, score);
        } else {
          console.error('createCertificate is not available. Make sure js/pdf-utils.js is loaded.');
        }
      });
      btn.dataset.pdfHandlerAttached = '1';
    });
  }, 0);
})();
</script>
